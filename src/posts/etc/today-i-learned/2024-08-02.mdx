---
title: "ğŸ¤” Abstract classes can't be instantiated!"
date: '2024-08-02'
description: 'Shared Preference ì €ì¥ ì¤‘ ë°œìƒí•œ ë¬¸ì œ í•´ê²°'
tags:
  - 'ì•ˆë“œë¡œì´ë“œ'
  - 'íŠ¸ëŸ¬ë¸”ìŠˆíŒ…'
---

> âœ¨ **ì˜¤ëŠ˜ ê³µë¶€í•œ ê²ƒ**
>
```
- ì‹¬í™” ì£¼ì°¨ ê°œì¸ ê³¼ì œ
- ìˆ™ë ¨ ì£¼ì°¨ íŠ¹ê°• ë³µìŠµ
```
>

## ë¬¸ì œ ìƒí™©

ë³´ê´€í•¨ì— ì €ì¥í•œ ë¦¬ìŠ¤íŠ¸ ê°ì²´ ë°ì´í„°ë¥¼ Shared Preferenceë¡œ ì €ì¥ì„ í–ˆì—ˆë‹¤. ì›ë˜ëŠ” ì˜ ëì—ˆì§€ë§Œ ê°ì²´ë¥¼ sealed classë¡œ ë°”ê¾¸ì ë§ˆì ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤. 

```kotlin
val listType = object : TypeToken<MutableList<ListItem>>() {}.type
// ì´ ì¤„ì—ì„œ jsonìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë„ì¤‘ ì—ëŸ¬ ë°œìƒ..
return gson.fromJson(jsonString, listType)
```

> com.google.gson.JsonIOException: Abstract classes can't be instantiated! Register an InstanceCreator or a TypeAdapter for this type.
> 

ì´ íƒ€ì…ì— ëŒ€í•´ TypeAdapterë¥¼ ì§€ì •í•´ë‹¬ë¼ëŠ” ëœ».. ê°™ë‹¤. ê·¸ë˜ì„œ ì°¾ì•„ë³´ë‹ˆ CustomDeserializerë¥¼ ì‚¬ìš©í•˜ë©´ í•´ê²°ëœë‹¤ê³  í•œë‹¤. 

## í•´ê²°

íƒ€ì…ì´ ë‹¤ ë¬¸ìì—´ì´ì—¬ì„œ êµ¬í˜„í•˜ëŠ”ë°ì—ëŠ” ì–´ë ¤ìš´ ì ì€ ì—†ì—ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì£¼ê³ ,

```kotlin
	class CustomerDeserializer : JsonDeserializer<ListItem> {
    	override fun deserialize(
        	json: JsonElement,
            typeOfT: Type?,
            context: JsonDeserializationContext?
        ): ListItem {
        	val jsonObject = json.asJsonObject
        	return if (jsonObject.has("thumbnail")) ListItem.VideoItem(
        		thumbnail = jsonObject.get("thumbnail").asString,
        		title = jsonObject.get("title").asString,
        		datetime = jsonObject.get("datetime").asString,
        		isBookmarked = jsonObject.get("isBookmarked").asBoolean
    		)
    		else ListItem.ImageItem(
    			thumbnailUrl = jsonObject.get("thumbnailUrl").asString,
    			siteName = jsonObject.get("siteName").asString,
  	  			datetime = jsonObject.get("datetime").asString,
    			isBookmarked = jsonObject.get("isBookmarked").asBoolean
    		)
    	}
}
```

`GsonBuilder()`ë¥¼ ì‚¬ìš©í•´ ì ìš©í•´ì¤„ ìˆ˜ ìˆë‹¤. 
        
```kotlin
private val gson =
	GsonBuilder().registerTypeAdapter(ListItem::class.java, CustomerDeserializer()).create()
```


