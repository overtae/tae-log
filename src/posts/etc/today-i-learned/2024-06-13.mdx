---
title: 'ìŠ¤ë ˆë“œì™€ ì½”ë£¨í‹´ì„ ì–´ë–»ê²Œ ì‚¬ìš©í• ê¹Œ?'
date: '2024-06-13'
description: 'ì˜ˆì œ ì½”ë“œë¡œ ì•Œì•„ë³´ì!'
tags:
  - 'ì•ˆë“œë¡œì´ë“œ'
---

> âœ¨ **ì˜¤ëŠ˜ ê³µë¶€í•œ ê²ƒ**
>
```
- ì•Œê³ ë¦¬ì¦˜ Nê°œì˜ ìµœì†Œê³µë°°ìˆ˜ í’€ì´
- ìŠ¤ë ˆë“œì™€ ì½”ë£¨í‹´ ê°œë… ë³µìŠµ
- ê°œì¸ ê³¼ì œ lv3
```
>

## @Volatile ì´ ë­ì§€?

ê°•ì˜ë¥¼ ë“£ë˜ ì¤‘ ì½”ë“œì— ê°‘ìê¸° ë“±ì¥í•œ ë…€ì„ì´ë‹¤. 

```kotlin
companion object {
    @Volatile private var instance: CashShop? = null

    fun getInstance(): CashShop {
        if(instance == null) {
            synchronized(this) {
                instance = CashShop()
            }
        }
        return instance!!
    }
}
```

`@Volatile` ì€ ë³€ìˆ˜ ì„ ì–¸ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ê°’ì„ ë©”ì¸ ë©”ëª¨ë¦¬ì—ë§Œ ì ì¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤ê³  í•œë‹¤. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ìŠ¤ë ˆë“œëŠ” ë©”ì¸ ë©”ëª¨ë¦¬ì—ì„œ ì½ì–´ì˜¨ ê°’ì„ CPU ìºì‹œì— ì €ì¥í•˜ê²Œ ë˜ê³ , ê°ê°ì˜ ìŠ¤ë ˆë“œê°€ ìºì‹œí•œ ê°’ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤. ì´ê±¸ ë°©ì§€í•˜ê¸° ìœ„í•œ í‚¤ì›Œë“œì´ë‹¤. 

## ìŠ¤ë ˆë“œ

ìŠ¤ë ˆë“œëŠ” thread í‚¤ì›Œë“œë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤! ì—¬ëŸ¬ ê°œ ë§Œë“¤ë©´ ë©€í‹° ìŠ¤ë ˆë“œê°€ ë˜ê² ë‹¤.

```kotlin
thread(start = true) {
    for(i in 1..10) {
        println("Thread1: í˜„ì¬ ìˆ«ìëŠ” ${i}")
        // ë¹„ë™ê¸° í•¨ìˆ˜
        // 1ì´ˆì˜ ë”œë ˆì´ ì¶”ê°€
        runBlocking {
            launch {
                delay(1000)
            }
        }
    }
}
```

## ì½”ë£¨í‹´

ì½”ë£¨í‹´ì€ ì½”ë£¨í‹´ ê°ì²´ë¥¼ ìƒì„±í•´ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì½”ë£¨í‹´ì€ ë¹Œë”ë¼ëŠ” ê²ƒê³¼ ê°™ì´ ì‚¬ìš©ë˜ëŠ”ë°, ëŒ€í‘œì ì¸ ë¹Œë”ë¡œëŠ” `launch`ì™€ `async`ê°€ ìˆë‹¤. 

> **ğŸ’¡ `launch` vs. `async`**
> 
> 
> **ë°˜í™˜ ê°’ì´ ìˆëŠ”ì§€ì˜ ì—¬ë¶€**ë¡œ êµ¬ë¶„í•œë‹¤. ë‘˜ ë‹¤ ëŒë‹¤ í•¨ìˆ˜ì˜ í˜•íƒœì´ë©°, `async` í•¨ìˆ˜ëŠ” ë§ˆì§€ë§‰ êµ¬ë¬¸ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.
> 
> - `launch`: ë°˜í™˜ ê°’ì´ ì—†ëŠ” Job ê°ì²´
> - `async`: ë°˜í™˜ê°’ì´ ìˆëŠ” Deffered ê°ì²´

```kotlin
// ì½”ë£¨í‹´ íŒ¨í‚¤ì§€ import í•„ìš”
import kotlinx.coroutines.*

// CoroutineScope: ì‚¬ìš© í›„ í•´ì œ í•„ìš”
val scope = CoroutineScope(Dispatcher.Default)

// launchë‚˜ asyncë¼ëŠ” í•¨ìˆ˜ë¥¼ í†µí•´ ìƒˆë¡œìš´ ì½”ë£¨í‹´ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
val coroutineA = scope.launch { ... }
val coroutineB = scope.async { ... }

// ì‘ì—…ì´ ëë‚˜ë©´ í•´ì œí•´ì£¼ì–´ì•¼ í•œë‹¤.
coroutineA.cancel()

// GlobalScope: í•´ì œ í•„ìš” X 
val coroutineC = GlobalScope.launch { ... }

// runBlockingì„ ì‚¬ìš©í•˜ë©´ ì½”ë£¨í‹´ì´ ì¢…ë£Œë  ë•Œê¹Œì§€ ë©”ì¸ ë£¨í‹´ ëŒ€ê¸°
runBlocking {
	launch {
		for (i in 1..5) {
			println(i)
		}
	}
}

// í˜¹ì€, Jobì˜ ì‹¤í–‰ì´ ëë‚ ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” join() í•¨ìˆ˜ ì‚¬ìš© (ì•¼ë§¤ì„)
runBlocking {
  // ì½”ë£¨í‹´ì˜ ê²°ê³¼ê°’ì´ ë‚˜ì˜¬ ë•Œê¹Œì§€ ëŒ€ê¸°
	coroutineC.join()
}
```

